

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rasa Core as a HTTP server &mdash; Rasa Core 0.7.0a9 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rasa Core 0.7.0a9 documentation" href="index.html"/>
        <link rel="next" title="Domain, Slots, and Actions" href="domains.html"/>
        <link rel="prev" title="Plumbing - How it all fits together" href="plumbing.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rasa Core
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="read_first.html">Read this first</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="tour.html">A Quick Tour (no ML)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_scratch.html">A Bot From Scratch</a></li>
</ul>
<p class="caption"><span class="caption-text">More Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial_babi.html">Supervised Learning Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_fake_user.html">Interactive Learning with a Fake User</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Dives</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Common Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="plumbing.html">Plumbing - How it all fits together</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rasa Core as a HTTP server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-server">Running the server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#endpoints">Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#post-conversation-cid-parse"><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/conversation/&lt;cid&gt;/parse</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-conversation-cid-continue"><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/conversation/&lt;cid&gt;/continue</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-version"><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#events-and-action-execution">Events and Action Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="domains.html">Domain, Slots, and Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="connectors.html">Connecting to messaging &amp; voice platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="stories.html">Training Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling Reminders</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/events.html">Events</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="featurisation.html">Featurization</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpreters.html">Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="policies.html">Creating Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="state.html">Tracking Conversation State</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rasa Core</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Rasa Core as a HTTP server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/http.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  


    
    



    <p class="scv-banner scv-sphinx_rtd_theme"><a href="../0.8.5/http.html"><b>Warning:</b> This document is for an old version of Rasa Core. The latest version is 0.8.5.</a></p>

<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="rasa-core-as-a-http-server">
<span id="section-http"></span><h1>Rasa Core as a HTTP server<a class="headerlink" href="#rasa-core-as-a-http-server" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before you can use the server, you need to define a domain, create training
data, and train a model. You can then use the trained model for remote code
execution! See <a class="reference internal" href="tour.html#tour"><span class="std std-ref">A Quick Tour (no ML)</span></a> for an introduction.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The HTTP API is still experimental and we&#8217;d appreciate your feedback (e.g.
via <a class="reference external" href="https://gitter.im/RasaHQ/rasa_core">Gitter</a>).</p>
</div>
<p>The HTTP api exists to make it easy for non-python projects to use Rasa Core.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The general idea is to run the actions within your code (arbitrary language),
instead of python. To do this, Rasa Core will startup a web server where you
need to pass the user messages to. Rasa Core on the other side will tell you
which actions you need to run. After running these actions, you need to notify
the framework that you executed them, and tell the model about any update of the
internal dialogue state for that user. All of these interactions are done using
a HTTP REST interface.</p>
</div>
<div class="section" id="running-the-server">
<h2>Running the server<a class="headerlink" href="#running-the-server" title="Permalink to this headline">¶</a></h2>
<p>You can run a simple http server that handles requests using your
models with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python -m rasa_core.server -d examples/babi/models/policy/current -u examples/babi/models/nlu/current_py2 -o out.log
</pre></div>
</div>
<p>The different parameters are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-d</span></code>, which is the path to the Rasa Core model.</li>
<li><code class="docutils literal"><span class="pre">-u</span></code>, which is the path to the Rasa NLU model.</li>
<li><code class="docutils literal"><span class="pre">-o</span></code>, which is the path to the log file.</li>
</ul>
</div>
<div class="section" id="endpoints">
<h2>Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="post-conversation-cid-parse">
<h3><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/conversation/&lt;cid&gt;/parse</span></code><a class="headerlink" href="#post-conversation-cid-parse" title="Permalink to this headline">¶</a></h3>
<p>You must POST data in this format <code class="docutils literal"><span class="pre">'{&quot;query&quot;:&quot;&lt;your</span> <span class="pre">text</span> <span class="pre">to</span> <span class="pre">parse&gt;&quot;}'</span></code>,
you can do this with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ curl -XPOST localhost:5005/parse -d <span class="s1">&#39;{&quot;query&quot;:&quot;hello there&quot;}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="post-conversation-cid-continue">
<h3><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/conversation/&lt;cid&gt;/continue</span></code><a class="headerlink" href="#post-conversation-cid-continue" title="Permalink to this headline">¶</a></h3>
<p>You can post your training data to this endpoint to train a new model.
This request will wait for the server answer: either the model was trained successfully or the training errored.
If you want to name your model to be able to use it during parse requests later on,
you should pass the name <code class="docutils literal"><span class="pre">/train?name=my_model</span></code>. Any parameter passed with the query string will be treated as a
configuration parameter of the model, hence you can change all the configuration values listed in the
configuration section by passing in their name and the adjusted value.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ curl -XPOST localhost:5000/train -d @data/examples/rasa/demo-rasa.json
</pre></div>
</div>
</div>
<div class="section" id="get-version">
<h3><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/version</span></code><a class="headerlink" href="#get-version" title="Permalink to this headline">¶</a></h3>
<p>This will return the current version of the Rasa NLU instance.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ curl localhost:5005/version <span class="p">|</span> python -mjson.tool
<span class="o">{</span>
  <span class="s2">&quot;version&quot;</span> : <span class="s2">&quot;0.7.2&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="events-and-action-execution">
<span id="section-events-actions"></span><h2>Events and Action Execution<a class="headerlink" href="#events-and-action-execution" title="Permalink to this headline">¶</a></h2>
<p>Instead of writing the actions in python code, you can use the HTTP API to write
the code that should be run in an arbitrary language.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="domains.html" class="btn btn-neutral float-right" title="Domain, Slots, and Actions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plumbing.html" class="btn btn-neutral" title="Plumbing - How it all fits together" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rasa Technologies GmbH.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 0.6.9
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../0.8.5/http.html">0.8.5</a></dd>
            <dd><a href="../0.8.4/http.html">0.8.4</a></dd>
            <dd><a href="../0.8.3/http.html">0.8.3</a></dd>
            <dd><a href="../0.8.2/http.html">0.8.2</a></dd>
            <dd><a href="../0.8.1/http.html">0.8.1</a></dd>
            <dd><a href="../0.8.0/http.html">0.8.0</a></dd>
            <dd><a href="../0.7.9/http.html">0.7.9</a></dd>
            <dd><a href="http.html">0.6.9</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../master/http.html">master</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.7.0a9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>